!function(){var e=$(".global-preloader");setTimeout(function(){e.addClass("is-logo-show")},550),$(window).on("load",function(){setTimeout(function(){e.addClass("is-content-load"),setTimeout(function(){$("body").css("overflow","visible")},1e3),(new WOW).init()},1500)})}(),$(document).ready(function(){$.ajax("http://167.99.203.107:8080/").done(function(e){$("#span_price").html(e.price)})}),$(document).ready(function(){function e(e,n){$(e).click(function(e){var o=$(this).attr("href"),t=$(o).offset().top;t<0&&(t=0),$("html, body").animate({scrollTop:t-n},"slow"),e.preventDefault()})}$(document).on("click",".contacts__cities-item",function(e){e.preventDefault();var n=$(this),o=n.index();n.siblings().removeClass("is-active"),n.addClass("is-active"),$(".contacts__info-container").css("display","none").eq(o).fadeIn(500)}),setTimeout(function(){$("#weather-frame").attr("src","https://www.ventusky.com/")},3500),function(){Barba.Pjax.init(),Barba.Prefetch.init(),$("body").append('<div class="page-preloader"><div class="global-preloader__under"></div></div>');var e=$(".page-preloader"),n=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.showLoader()]).then(this.hideLoader.bind(this))},showLoader:function(){return e.addClass("is-page-load-start"),$(this.oldContainer).promise()},hideLoader:function(){var n=this,o=$(this.newContainer);setTimeout(function(){e.addClass("is-page-load-end"),o.animate({},400,function(){n.done()}),setTimeout(function(){e.removeClass("is-page-load-start is-page-load-end")},800),$("body").css("overflow","visible")},500)}});Barba.Dispatcher.on("newPageReady",function(e,n,o){setTimeout(function(){$.each($(".animated"),function(){$(this).removeClass("animated").removeAttr("style")}),(new WOW).init()},500),setTimeout(function(){$("#weather-frame").attr("src","https://www.ventusky.com/")},1500)}),Barba.Pjax.getTransition=function(){return n}}(),$(".f-right__show").hover(function(e){$(this).find(".f-right__dropdown").fadeIn()},function(){$(".f-right__dropdown").fadeOut()}),function(){$(document).width()>993&&($(document).on("mouseover",".header__languages",function(e){e.preventDefault(),$(this).find(".header__more-languages").fadeIn()}),$(document).on("mouseleave",".header__languages",function(e){e.preventDefault(),$(this).find(".header__more-languages").fadeOut()}))}(),$(document).on("mouseover",".hover-link",function(e){e.preventDefault(),$(this).parent().parent().addClass("is-hover")}),$(document).on("mouseleave",".hover-link",function(e){e.preventDefault(),$(this).parent().parent().removeClass("is-hover")}),$(document).ready(function(){$(document).on("click","#nav-icon2",function(){$(this).toggleClass("open"),$(".header__left-mobile").toggleClass("is-open"),$("body").css("overflow","hidden")})}),$(document).ready(function(){$(document).on("click","#nav-icon2.open",function(){$("body").css("overflow","auto")})}),$(document).ready(function(){$(document).on("click",".menu-link",function(){$("ul li a").removeClass("is-active"),$(".enter-link").removeClass("is-active"),$(".header__left-mobile").removeClass("is-open"),$("#nav-icon2").removeClass("open"),$(this).addClass("is-active")})}),$(document).ready(function(){$(document).on("click",".enter-link",function(){$(".header a").removeClass("is-active"),$(".header__left-mobile").removeClass("is-open"),$("#nav-icon2").removeClass("open"),$(this).addClass("is-active")})}),$(".input-login").each(function(){""!=$(this).val()&&$(this).parent().addClass("animation")}),$(".login-input").focus(function(){$(this).parent().addClass("animation animation-color")}),$(".login-input").focusout(function(){""===$(this).val()&&$(this).parent().removeClass("animation"),$(this).parent().removeClass("animation-color")}),$(document).on("click",".open-popup",function(e){e.preventDefault(),$(this).magnificPopup({removalDelay:500,callbacks:{beforeOpen:function(){this.st.mainClass=this.st.el.attr("data-effect")}},midClick:!0}).magnificPopup("open")}),function(){function e(){$(document).width()>992?($(".personal__info").hasClass("slick-initialized")&&$(".personal__info").slick("unslick"),$(".personal__image-carousel").hasClass("slick-initialized")&&$(".personal__image-carousel").slick("unslick")):($(".personal__info").hasClass("slick-initialized")||$(".personal__info").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,centerMode:!0,asNavFor:".personal__image-carousel"}),$(".personal__image-carousel").hasClass("slick-initialized")||$(".personal__image-carousel").slick({slidesToShow:1,slidesToScroll:1,asNavFor:".personal__info",dots:!0,focusOnSelect:!0}))}$(document).on("mouseover",".personal__link",function(e){if($(this).hasClass("is-active"));else{e.preventDefault();var n=$(this),o=n.index();n.siblings().removeClass("is-active"),n.addClass("is-active"),$(".personal__image").fadeOut().eq(o).fadeIn(400)}}),e(),$(window).resize(function(){e()})}(),$(document).on("click",'a[href="#"]',function(e){e.preventDefault()}),$(window).scroll(function(){$(window).scrollTop()+$(window).height();$(window).scrollTop()>250?$(".bottom-arrow").addClass("is-active"):$(".bottom-arrow").removeClass("is-active")});var n=$(window);!function(){$("[js-teleport]").each(function(e,o){function t(){var e;"<"===r?e=n.width()<l:">"===r&&(e=n.width()>l),e?(s.html(a),i.html("")):(i.html(a),s.html(""))}var i=$(o),a=$(o).html(),s=$("[data-teleport-target="+$(o).data("teleport-to")+"]"),l=$(o).data("teleport-condition").substring(1),r=$(o).data("teleport-condition").substring(0,1);s&&a&&r&&(t(),n.on("resize",t))})}(),function(){$(document).width()>1268?$(document).find(".enter-link").html("Увійти до кабінету"):$(document).find(".enter-link").html("Увійти"),$(window).resize(function(){$(document).width()>1268?$(document).find(".enter-link").html("Увійти до кабінету"):$(document).find(".enter-link").html("Увійти")})}(),e("a[href='#anchor']",67)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyIkcHJlbG9hZGVyIiwiJCIsInNldFRpbWVvdXQiLCJhZGRDbGFzcyIsIndpbmRvdyIsIm9uIiwiY3NzIiwiV09XIiwiaW5pdCIsImRvY3VtZW50IiwicmVhZHkiLCJhamF4IiwiZG9uZSIsImRhdGEiLCJodG1sIiwicHJpY2UiLCJzY3JvbGxUb0VsZW1lbnQiLCJlbGVtZW50Iiwib2Zmc2V0IiwiY2xpY2siLCJlIiwiZWxlbWVudENsaWNrIiwidGhpcyIsImF0dHIiLCJkZXN0aW5hdGlvbiIsInRvcCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJwcmV2ZW50RGVmYXVsdCIsIiRzZWxmIiwidGFiSW5kZXgiLCJpbmRleCIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJlcSIsImZhZGVJbiIsIkJhcmJhIiwiUGpheCIsIlByZWZldGNoIiwiYXBwZW5kIiwiJHBhZ2VQcmVsb2FkZXIiLCJGYWRlVHJhbnNpdGlvbiIsIkJhc2VUcmFuc2l0aW9uIiwiZXh0ZW5kIiwic3RhcnQiLCJQcm9taXNlIiwiYWxsIiwibmV3Q29udGFpbmVyTG9hZGluZyIsInNob3dMb2FkZXIiLCJ0aGVuIiwiaGlkZUxvYWRlciIsImJpbmQiLCJvbGRDb250YWluZXIiLCJwcm9taXNlIiwiX3RoaXMiLCIkZWwiLCJuZXdDb250YWluZXIiLCJEaXNwYXRjaGVyIiwiY3VycmVudFN0YXR1cyIsIm9sZFN0YXR1cyIsImNvbnRhaW5lciIsImVhY2giLCJyZW1vdmVBdHRyIiwiZ2V0VHJhbnNpdGlvbiIsImhvdmVyIiwiZmluZCIsImZhZGVPdXQiLCJ3aWR0aCIsInBhcmVudCIsInRvZ2dsZUNsYXNzIiwidmFsIiwiZm9jdXMiLCJmb2N1c291dCIsIm1hZ25pZmljUG9wdXAiLCJyZW1vdmFsRGVsYXkiLCJjYWxsYmFja3MiLCJiZWZvcmVPcGVuIiwic3QiLCJtYWluQ2xhc3MiLCJlbCIsIm1pZENsaWNrIiwicGVyc29uYWxJbmZvU2xpZGVySW5pdCIsImhhc0NsYXNzIiwic2xpY2siLCJzbGlkZXNUb1Nob3ciLCJzbGlkZXNUb1Njcm9sbCIsImFycm93cyIsImZhZGUiLCJjZW50ZXJNb2RlIiwiYXNOYXZGb3IiLCJkb3RzIiwiZm9jdXNPblNlbGVjdCIsInJlc2l6ZSIsInNjcm9sbCIsImhlaWdodCIsIl93aW5kb3ciLCJpIiwidGVsZXBvcnQiLCJjb25kaXRpb24iLCJjb25kaXRpb25Qb3NpdGlvbiIsImNvbmRpdGlvbk1lZGlhIiwidGFyZ2V0Iiwib2JqSHRtbCIsInNlbGYiLCJzdWJzdHJpbmciXSwibWFwcGluZ3MiOiJDQUFBLFdBRUksR0FBSUEsR0FBYUMsRUFBRSxvQkFFbkJDLFlBQVcsV0FDUEYsRUFBV0csU0FBUyxpQkFDckIsS0FFSEYsRUFBRUcsUUFBUUMsR0FBRyxPQUFRLFdBQ2pCSCxXQUFXLFdBQ1BGLEVBQVdHLFNBQVMsbUJBRXBCRCxXQUFXLFdBRVBELEVBQUUsUUFBUUssSUFBSSxXQUFZLFlBQzNCLE1BRUgsR0FBSUMsTUFBTUMsUUFFWCxXQUtYUCxFQUFFUSxVQUFVQyxNQUFNLFdBRWRULEVBQUVVLEtBQUssK0JBQStCQyxLQUFLLFNBQVVDLEdBQVFaLEVBQUUsZUFBZWEsS0FBS0QsRUFBS0UsV0FpQjVGZCxFQUFFUSxVQUFVQyxNQUFNLFdBcVNkLFFBQVNNLEdBQWdCQyxFQUFTQyxHQUM5QmpCLEVBQUVnQixHQUFTRSxNQUFNLFNBQVNDLEdBQ3RCLEdBQUlDLEdBQWVwQixFQUFFcUIsTUFBTUMsS0FBSyxRQUM1QkMsRUFBY3ZCLEVBQUVvQixHQUFjSCxTQUFTTyxHQUN2Q0QsR0FBYyxJQUFLQSxFQUFjLEdBQ3JDdkIsRUFBRSxjQUFjeUIsU0FBVUMsVUFBV0gsRUFBY04sR0FBVSxRQUM3REUsRUFBRVEsbUJBelNWM0IsRUFBRVEsVUFBVUosR0FBRyxRQUFTLHlCQUEwQixTQUFTZSxHQUN2REEsRUFBRVEsZ0JBQ0YsSUFBSUMsR0FBUTVCLEVBQUVxQixNQUNWUSxFQUFXRCxFQUFNRSxPQUNyQkYsR0FBTUcsV0FBV0MsWUFBWSxhQUM3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QXNCMkYsVUFBVSxHQUM3REwsRUFBb0JsRyxFQUFFcUUsR0FBS3pELEtBQUssc0JBQXNCMkYsVUFBVSxFQUFHLEVBRW5FSCxJQUFVQyxHQUFXSCxJQW9CckJGLElBQ0FGLEVBQVExRixHQUFHLFNBQVUsU0FPakMsV0FDUUosRUFBRVEsVUFBVTBELFFBQVUsS0FDdEJsRSxFQUFFUSxVQUFVd0QsS0FBSyxlQUFlbkQsS0FBSyxzQkFFckNiLEVBQUVRLFVBQVV3RCxLQUFLLGVBQWVuRCxLQUFLLFVBRXpDYixFQUFFRyxRQUFRd0YsT0FBTyxXQUNUM0YsRUFBRVEsVUFBVTBELFFBQVUsS0FDdEJsRSxFQUFFUSxVQUFVd0QsS0FBSyxlQUFlbkQsS0FBSyxzQkFFckNiLEVBQUVRLFVBQVV3RCxLQUFLLGVBQWVuRCxLQUFLLGVBY2pERSxFQUFnQixvQkFBcUIiLCJmaWxlIjoiY29tbW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyICRwcmVsb2FkZXIgPSAkKCcuZ2xvYmFsLXByZWxvYWRlcicpO1xuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgJHByZWxvYWRlci5hZGRDbGFzcygnaXMtbG9nby1zaG93Jyk7XG4gICAgfSwgNTUwKTtcblxuICAgICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHByZWxvYWRlci5hZGRDbGFzcygnaXMtY29udGVudC1sb2FkJyk7XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy8gJHByZWxvYWRlci5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuY3NzKCdvdmVyZmxvdycsICd2aXNpYmxlJyk7XG4gICAgICAgICAgICB9LCAxMDAwKTtcblxuICAgICAgICAgICAgbmV3IFdPVygpLmluaXQoKTtcblxuICAgICAgICB9LCAxNTAwKTtcbiAgICB9KTtcbn0pKCk7XG5cblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cbiAgICAkLmFqYXgoJ2h0dHA6Ly8xNjcuOTkuMjAzLjEwNzo4MDgwLycpLmRvbmUoZnVuY3Rpb24gKGRhdGEpIHsgJCgnI3NwYW5fcHJpY2UnKS5odG1sKGRhdGEucHJpY2UpIH0pO1xuXG4gICAgLy8gdmFyIHByaWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzcGFuX3ByaWNlXCIpO1xuICAgIC8vIC8vICAgbWFrZSB0aGUgcmVxdWVzdFxuICAgIC8vIHZhciBYSFIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIC8vIFhIUi5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAvLyAgICAgaWYgKFhIUi5yZWFkeVN0YXRlID09IDQgJiYgWEhSLnN0YXR1cyA9PSAyMDApIHtcbiAgICAvLyAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShYSFIucmVzcG9uc2VUZXh0KS5wcmljZTtcbiAgICAvLyAgICAgICAgIHByaWNlLmlubmVySFRNTCA9IGRhdGE7XG4gICAgLy8gICAgIH1cbiAgICAvLyB9XG5cbiAgICAvLyBYSFIub3BlbihcIkdFVFwiLCBcImh0dHA6Ly8xNjcuOTkuMjAzLjEwNzo4MDgwXCIpO1xuICAgIC8vIFhIUi5zZW5kKCk7XG59KTtcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmNvbnRhY3RzX19jaXRpZXMtaXRlbScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgJHNlbGYgPSAkKHRoaXMpLFxuICAgICAgICAgICAgdGFiSW5kZXggPSAkc2VsZi5pbmRleCgpO1xuICAgICAgICAkc2VsZi5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgJHNlbGYuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAkKCcuY29udGFjdHNfX2luZm8tY29udGFpbmVyJykuY3NzKCdkaXNwbGF5Jywnbm9uZScpLmVxKHRhYkluZGV4KS5mYWRlSW4oNTAwKTtcbiAgICB9KTtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJyN3ZWF0aGVyLWZyYW1lJykuYXR0cignc3JjJywgJ2h0dHBzOi8vd3d3LnZlbnR1c2t5LmNvbS8nKTtcbiAgICB9LCAzNTAwKTtcblxuICAgIC8vIEJBUkJBLkpTXG4gICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICAvL1BsZWFzZSBub3RlLCB0aGUgRE9NIHNob3VsZCBiZSByZWFkeVxuICAgICAgICBCYXJiYS5QamF4LmluaXQoKTtcbiAgICAgICAgQmFyYmEuUHJlZmV0Y2guaW5pdCgpO1xuXG4gICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJwYWdlLXByZWxvYWRlclwiPjxkaXYgY2xhc3M9XCJnbG9iYWwtcHJlbG9hZGVyX191bmRlclwiPjwvZGl2PjwvZGl2PicpO1xuICAgICAgICB2YXIgJHBhZ2VQcmVsb2FkZXIgPSAkKCcucGFnZS1wcmVsb2FkZXInKTtcblxuICAgICAgICB2YXIgRmFkZVRyYW5zaXRpb24gPSBCYXJiYS5CYXNlVHJhbnNpdGlvbi5leHRlbmQoe1xuICAgICAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIFByb21pc2VcbiAgICAgICAgICAgICAgICAgICAgLmFsbChbdGhpcy5uZXdDb250YWluZXJMb2FkaW5nLCB0aGlzLnNob3dMb2FkZXIoKV0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHRoaXMuaGlkZUxvYWRlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHNob3dMb2FkZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICRwYWdlUHJlbG9hZGVyLmFkZENsYXNzKCdpcy1wYWdlLWxvYWQtc3RhcnQnKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMub2xkQ29udGFpbmVyKS5wcm9taXNlKCk7XG5cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGhpZGVMb2FkZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdmFyICRlbCA9ICQodGhpcy5uZXdDb250YWluZXIpO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJHBhZ2VQcmVsb2FkZXIuYWRkQ2xhc3MoJ2lzLXBhZ2UtbG9hZC1lbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgLy8g0KbQlSDQotCe0JHQhiDQndCVINCd0JDQlNCQXG4gICAgICAgICAgICAgICAgICAgICRlbC5hbmltYXRlKHt9LCA0MDAsIGZ1bmN0aW9uKCkgeyBfdGhpcy5kb25lKCk7IH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkcGFnZVByZWxvYWRlci5yZW1vdmVDbGFzcygnaXMtcGFnZS1sb2FkLXN0YXJ0IGlzLXBhZ2UtbG9hZC1lbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vINCS0YDQtdC80Y8g0YDQtdGE0YDQtdGI0LAg0L/RgNC10LvQvtCw0LTQtdGA0LBcbiAgICAgICAgICAgICAgICAgICAgfSwgODAwKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyDQktGA0LXQvNGPINC40YHRh9C10LfQvdC+0LLQtdC90LjRjyDQv9GA0LXQu9C+0LDQtNC10YDQsFxuICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuY3NzKCdvdmVyZmxvdycsICd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIEJhcmJhLkRpc3BhdGNoZXIub24oJ25ld1BhZ2VSZWFkeScsIGZ1bmN0aW9uKGN1cnJlbnRTdGF0dXMsIG9sZFN0YXR1cywgY29udGFpbmVyKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQuZWFjaCgkKCcuYW5pbWF0ZWQnKSwgZnVuY3Rpb24oKSB7ICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkJykucmVtb3ZlQXR0cignc3R5bGUnKTsgfSk7XG4gICAgICAgICAgICAgICAgbmV3IFdPVygpLmluaXQoKTtcblxuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCgnI3dlYXRoZXItZnJhbWUnKS5hdHRyKCdzcmMnLCAnaHR0cHM6Ly93d3cudmVudHVza3kuY29tLycpO1xuICAgICAgICAgICAgfSwgMTUwMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIEJhcmJhLlBqYXguZ2V0VHJhbnNpdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIEZhZGVUcmFuc2l0aW9uO1xuICAgICAgICB9O1xuICAgIH0pKCk7XG5cbiAgICAkKCcuZi1yaWdodF9fc2hvdycpLmhvdmVyKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICQodGhpcykuZmluZCgnLmYtcmlnaHRfX2Ryb3Bkb3duJykuZmFkZUluKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnLmYtcmlnaHRfX2Ryb3Bkb3duJykuZmFkZU91dCgpO1xuICAgICAgICB9KTtcblxuICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCQoZG9jdW1lbnQpLndpZHRoKCkgPiA5OTMpIHtcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZW92ZXInLCAnLmhlYWRlcl9fbGFuZ3VhZ2VzJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5oZWFkZXJfX21vcmUtbGFuZ3VhZ2VzJykuZmFkZUluKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZWxlYXZlJywgJy5oZWFkZXJfX2xhbmd1YWdlcycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuaGVhZGVyX19tb3JlLWxhbmd1YWdlcycpLmZhZGVPdXQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge31cbiAgICB9KSgpO1xuXG4gICAgJChkb2N1bWVudCkub24oJ21vdXNlb3ZlcicsICcuaG92ZXItbGluaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmFkZENsYXNzKCdpcy1ob3ZlcicpO1xuICAgIH0pO1xuICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZWxlYXZlJywgJy5ob3Zlci1saW5rJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICQodGhpcykucGFyZW50KCkucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2lzLWhvdmVyJyk7XG4gICAgfSk7XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNuYXYtaWNvbjInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ29wZW4nKTtcbiAgICAgICAgICAgICQoJy5oZWFkZXJfX2xlZnQtbW9iaWxlJykudG9nZ2xlQ2xhc3MoJ2lzLW9wZW4nKTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNuYXYtaWNvbjIub3BlbicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAnYXV0bycpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm1lbnUtbGluaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgndWwgbGkgYScpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgICAgICQoJy5lbnRlci1saW5rJykucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAgICAgJCgnLmhlYWRlcl9fbGVmdC1tb2JpbGUnKS5yZW1vdmVDbGFzcygnaXMtb3BlbicpO1xuICAgICAgICAgICAgJCgnI25hdi1pY29uMicpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5lbnRlci1saW5rJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCcuaGVhZGVyIGEnKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcuaGVhZGVyX19sZWZ0LW1vYmlsZScpLnJlbW92ZUNsYXNzKCdpcy1vcGVuJyk7XG4gICAgICAgICAgICAkKCcjbmF2LWljb24yJykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIFdPV1xuXG4gICAgLy8gbmV3IFdPVygpLmluaXQoKTtcblxuXG4gICAgJChcIi5pbnB1dC1sb2dpblwiKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoJCh0aGlzKS52YWwoKSAhPSBcIlwiKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKFwiYW5pbWF0aW9uXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAkKFwiLmxvZ2luLWlucHV0XCIpLmZvY3VzKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKFwiYW5pbWF0aW9uIGFuaW1hdGlvbi1jb2xvclwiKTtcbiAgICB9KTtcblxuICAgICQoXCIubG9naW4taW5wdXRcIikuZm9jdXNvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLnZhbCgpID09PSBcIlwiKVxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImFuaW1hdGlvblwiKTtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImFuaW1hdGlvbi1jb2xvclwiKTtcbiAgICB9KTtcblxuICAgIC8vIElubGluZSBwb3B1cHNcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm9wZW4tcG9wdXAnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAkKHRoaXMpLm1hZ25pZmljUG9wdXAoe1xuICAgICAgICAgICAgcmVtb3ZhbERlbGF5OiA1MDAsIC8vZGVsYXkgcmVtb3ZhbCBieSBYIHRvIGFsbG93IG91dC1hbmltYXRpb25cbiAgICAgICAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICAgICAgICAgIGJlZm9yZU9wZW46IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0Lm1haW5DbGFzcyA9IHRoaXMuc3QuZWwuYXR0cignZGF0YS1lZmZlY3QnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWlkQ2xpY2s6IHRydWVcbiAgICAgICAgfSkubWFnbmlmaWNQb3B1cCgnb3BlbicpO1xuICAgIH0pOyBcblxuICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ21vdXNlb3ZlcicsICcucGVyc29uYWxfX2xpbmsnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnaXMtYWN0aXZlJykpIHt9IFxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHZhciAkc2VsZiA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgIHRhYkluZGV4ID0gJHNlbGYuaW5kZXgoKTtcbiAgICAgICAgICAgICAgICAkc2VsZi5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAkc2VsZi5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJCgnLnBlcnNvbmFsX19pbWFnZScpLmZhZGVPdXQoKS5lcSh0YWJJbmRleCkuZmFkZUluKDQwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIHBlcnNvbmFsSW5mb1NsaWRlckluaXQoKSB7XG5cbiAgICAgICAgICAgIGlmICgkKGRvY3VtZW50KS53aWR0aCgpID4gOTkyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQoJy5wZXJzb25hbF9faW5mbycpLmhhc0NsYXNzKCdzbGljay1pbml0aWFsaXplZCcpKVxuICAgICAgICAgICAgICAgICAgICAkKCcucGVyc29uYWxfX2luZm8nKS5zbGljaygndW5zbGljaycpO1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgaWYgKCQoJy5wZXJzb25hbF9faW1hZ2UtY2Fyb3VzZWwnKS5oYXNDbGFzcygnc2xpY2staW5pdGlhbGl6ZWQnKSlcbiAgICAgICAgICAgICAgICAgICAgJCgnLnBlcnNvbmFsX19pbWFnZS1jYXJvdXNlbCcpLnNsaWNrKCd1bnNsaWNrJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghJCgnLnBlcnNvbmFsX19pbmZvJykuaGFzQ2xhc3MoJ3NsaWNrLWluaXRpYWxpemVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnBlcnNvbmFsX19pbmZvJykuc2xpY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJvd3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmFkZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlck1vZGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhc05hdkZvcjogJy5wZXJzb25hbF9faW1hZ2UtY2Fyb3VzZWwnLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoISQoJy5wZXJzb25hbF9faW1hZ2UtY2Fyb3VzZWwnKS5oYXNDbGFzcygnc2xpY2staW5pdGlhbGl6ZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAkKCcucGVyc29uYWxfX2ltYWdlLWNhcm91c2VsJykuc2xpY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBhc05hdkZvcjogJy5wZXJzb25hbF9faW5mbycsXG4gICAgICAgICAgICAgICAgICAgICAgICBkb3RzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNPblNlbGVjdDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgcGVyc29uYWxJbmZvU2xpZGVySW5pdCgpO1xuXG4gICAgICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBwZXJzb25hbEluZm9TbGlkZXJJbml0KCk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnYVtocmVmPVwiI1wiXScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNjcm9sbEJvdHRvbSA9ICQod2luZG93KS5zY3JvbGxUb3AoKSArICQod2luZG93KS5oZWlnaHQoKTtcbiAgICAgICAgaWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSA+IDI1MCkge1xuICAgICAgICAgICAgJCgnLmJvdHRvbS1hcnJvdycpLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJy5ib3R0b20tYXJyb3cnKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vLy8vLy8vLy8vL1xuICAgIC8vIFRFTEVQT1JUIFBMVUdJTlxuICAgIC8vLy8vLy8vLy8vL1xuXG4gICAgdmFyIF93aW5kb3cgPSAkKHdpbmRvdyk7XG5cbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJ1tqcy10ZWxlcG9ydF0nKS5lYWNoKGZ1bmN0aW9uKGksIHZhbCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSAkKHZhbClcbiAgICAgICAgICAgIHZhciBvYmpIdG1sID0gJCh2YWwpLmh0bWwoKTtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKCdbZGF0YS10ZWxlcG9ydC10YXJnZXQ9JyArICQodmFsKS5kYXRhKCd0ZWxlcG9ydC10bycpICsgJ10nKTtcbiAgICAgICAgICAgIHZhciBjb25kaXRpb25NZWRpYSA9ICQodmFsKS5kYXRhKCd0ZWxlcG9ydC1jb25kaXRpb24nKS5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICB2YXIgY29uZGl0aW9uUG9zaXRpb24gPSAkKHZhbCkuZGF0YSgndGVsZXBvcnQtY29uZGl0aW9uJykuc3Vic3RyaW5nKDAsIDEpO1xuXG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmIG9iakh0bWwgJiYgY29uZGl0aW9uUG9zaXRpb24pIHtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRlbGVwb3J0KCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb25Qb3NpdGlvbiA9PT0gXCI8XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbiA9IF93aW5kb3cud2lkdGgoKSA8IGNvbmRpdGlvbk1lZGlhO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbmRpdGlvblBvc2l0aW9uID09PSBcIj5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uID0gX3dpbmRvdy53aWR0aCgpID4gY29uZGl0aW9uTWVkaWE7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuaHRtbChvYmpIdG1sKVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5odG1sKCcnKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5odG1sKG9iakh0bWwpXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuaHRtbChcIlwiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGVsZXBvcnQoKTtcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCdyZXNpemUnLCAodGVsZXBvcnQpKTtcblxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkKGRvY3VtZW50KS53aWR0aCgpID4gMTI2OCkge1xuICAgICAgICAgICAgJChkb2N1bWVudCkuZmluZCgnLmVudGVyLWxpbmsnKS5odG1sKCfQo9Cy0ZbQudGC0Lgg0LTQviDQutCw0LHRltC90LXRgtGDJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKGRvY3VtZW50KS5maW5kKCcuZW50ZXItbGluaycpLmh0bWwoJ9Cj0LLRltC50YLQuCcpO1xuICAgICAgICB9XG4gICAgICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJChkb2N1bWVudCkud2lkdGgoKSA+IDEyNjgpIHtcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5maW5kKCcuZW50ZXItbGluaycpLmh0bWwoJ9Cj0LLRltC50YLQuCDQtNC+INC60LDQsdGW0L3QtdGC0YMnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkuZmluZCgnLmVudGVyLWxpbmsnKS5odG1sKCfQo9Cy0ZbQudGC0LgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIGZ1bmN0aW9uIHNjcm9sbFRvRWxlbWVudChlbGVtZW50LCBvZmZzZXQpIHtcbiAgICAgICAgJChlbGVtZW50KS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudENsaWNrID0gJCh0aGlzKS5hdHRyKFwiaHJlZlwiKTtcbiAgICAgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9ICQoZWxlbWVudENsaWNrKS5vZmZzZXQoKS50b3A7XG4gICAgICAgICAgICBpZiAoZGVzdGluYXRpb24gPCAwKSB7IGRlc3RpbmF0aW9uID0gMDsgfVxuICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoeyBzY3JvbGxUb3A6IGRlc3RpbmF0aW9uIC0gb2Zmc2V0IH0sIFwic2xvd1wiKTtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNjcm9sbFRvRWxlbWVudChcImFbaHJlZj0nI2FuY2hvciddXCIsIDY3KTtcblxufSk7Il19
