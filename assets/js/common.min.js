!function(){var e=$(".global-preloader");setTimeout(function(){e.addClass("is-logo-show")},550),$(window).on("load",function(){setTimeout(function(){e.addClass("is-content-load"),setTimeout(function(){$("body").css("overflow","visible")},1e3),(new WOW).init()},1500)})}(),$(document).ready(function(){$.ajax("http://167.99.203.107:8080/").done(function(e){$("#span_price").html(e.price)})}),$(document).ready(function(){function e(e,n){$(e).click(function(e){var o=$(this).attr("href"),t=$(o).offset().top;t<0&&(t=0),$("html, body").animate({scrollTop:t-n},"slow"),e.preventDefault()})}$(document).on("click",".contacts__cities-item",function(e){e.preventDefault();var n=$(this),o=n.index();n.siblings().removeClass("is-active"),n.addClass("is-active"),$(".contacts__info-container").css("display","none").eq(o).fadeIn(500)}),setTimeout(function(){$("#weather-frame").attr("src","https://www.ventusky.com/")},3500),function(){Barba.Pjax.init(),Barba.Prefetch.init(),$("body").append('<div class="page-preloader"><div class="global-preloader__under"></div></div>');var e=$(".page-preloader"),n=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.showLoader()]).then(this.hideLoader.bind(this))},showLoader:function(){return e.addClass("is-page-load-start"),$(this.oldContainer).promise()},hideLoader:function(){var n=this,o=$(this.newContainer);setTimeout(function(){e.addClass("is-page-load-end"),o.animate({},400,function(){n.done()}),setTimeout(function(){e.removeClass("is-page-load-start is-page-load-end")},800),$("body").css("overflow","visible")},500)}});Barba.Dispatcher.on("newPageReady",function(e,n,o){setTimeout(function(){$.each($(".animated"),function(){$(this).removeClass("animated").removeAttr("style")}),(new WOW).init()},500),setTimeout(function(){$("#weather-frame").attr("src","https://www.ventusky.com/")},1500)}),Barba.Pjax.getTransition=function(){return n}}(),$(".f-right__show").hover(function(e){$(this).find(".f-right__dropdown").fadeIn()},function(){$(".f-right__dropdown").fadeOut()}),function(){$(document).width()>993&&($(document).on("mouseover",".header__languages",function(e){e.preventDefault(),$(this).find(".header__more-languages").fadeIn()}),$(document).on("mouseleave",".header__languages",function(e){e.preventDefault(),$(this).find(".header__more-languages").fadeOut()}))}(),$(document).on("mouseover",".hover-link",function(e){e.preventDefault(),$(this).parent().parent().addClass("is-hover")}),$(document).on("mouseleave",".hover-link",function(e){e.preventDefault(),$(this).parent().parent().removeClass("is-hover")}),$(document).ready(function(){$(document).on("click","#nav-icon2",function(){$(this).toggleClass("open"),$(".header__left-mobile").toggleClass("is-open"),$("body").css("overflow","hidden")})}),$(document).ready(function(){$(document).on("click","#nav-icon2.open",function(){$("body").css("overflow","auto")})}),$(document).ready(function(){$(document).on("click",".menu-link",function(){$("ul li a").removeClass("is-active"),$(".enter-link").removeClass("is-active"),$(".header__left-mobile").removeClass("is-open"),$("#nav-icon2").removeClass("open"),$(this).addClass("is-active")})}),$(document).ready(function(){$(document).on("click",".enter-link",function(){$(".header a").removeClass("is-active"),$(".header__left-mobile").removeClass("is-open"),$("#nav-icon2").removeClass("open"),$(this).addClass("is-active")})}),$(".input-login").each(function(){""!=$(this).val()&&$(this).parent().addClass("animation")}),$(".login-input").focus(function(){$(this).parent().addClass("animation animation-color")}),$(".login-input").focusout(function(){""===$(this).val()&&$(this).parent().removeClass("animation"),$(this).parent().removeClass("animation-color")}),$(".open-popup").magnificPopup({removalDelay:500,callbacks:{beforeOpen:function(){this.st.mainClass=this.st.el.attr("data-effect")}},midClick:!0}),function(){function e(){$(document).width()>992?($(".personal__info").hasClass("slick-initialized")&&$(".personal__info").slick("unslick"),$(".personal__image-carousel").hasClass("slick-initialized")&&$(".personal__image-carousel").slick("unslick")):($(".personal__info").hasClass("slick-initialized")||$(".personal__info").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,centerMode:!0,asNavFor:".personal__image-carousel"}),$(".personal__image-carousel").hasClass("slick-initialized")||$(".personal__image-carousel").slick({slidesToShow:1,slidesToScroll:1,asNavFor:".personal__info",dots:!0,focusOnSelect:!0}))}$(document).on("mouseover",".personal__link",function(e){if($(this).hasClass("is-active"));else{e.preventDefault();var n=$(this),o=n.index();n.siblings().removeClass("is-active"),n.addClass("is-active"),$(".personal__image").fadeOut().eq(o).fadeIn(400)}}),e(),$(window).resize(function(){e()})}(),$(document).on("click",'a[href="#"]',function(e){e.preventDefault()}),$(window).scroll(function(){$(window).scrollTop()+$(window).height();$(window).scrollTop()>250?$(".bottom-arrow").addClass("is-active"):$(".bottom-arrow").removeClass("is-active")});var n=$(window);!function(){$("[js-teleport]").each(function(e,o){function t(){var e;"<"===r?e=n.width()<l:">"===r&&(e=n.width()>l),e?(s.html(a),i.html("")):(i.html(a),s.html(""))}var i=$(o),a=$(o).html(),s=$("[data-teleport-target="+$(o).data("teleport-to")+"]"),l=$(o).data("teleport-condition").substring(1),r=$(o).data("teleport-condition").substring(0,1);s&&a&&r&&(t(),n.on("resize",t))})}(),function(){$(document).width()>1268?$(document).find(".enter-link").html("Увійти до кабінету"):$(document).find(".enter-link").html("Увійти"),$(window).resize(function(){$(document).width()>1268?$(document).find(".enter-link").html("Увійти до кабінету"):$(document).find(".enter-link").html("Увійти")})}(),e("a[href='#anchor']",67)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyIkcHJlbG9hZGVyIiwiJCIsInNldFRpbWVvdXQiLCJhZGRDbGFzcyIsIndpbmRvdyIsIm9uIiwiY3NzIiwiV09XIiwiaW5pdCIsImRvY3VtZW50IiwicmVhZHkiLCJhamF4IiwiZG9uZSIsImRhdGEiLCJodG1sIiwicHJpY2UiLCJzY3JvbGxUb0VsZW1lbnQiLCJlbGVtZW50Iiwib2Zmc2V0IiwiY2xpY2siLCJlIiwiZWxlbWVudENsaWNrIiwidGhpcyIsImF0dHIiLCJkZXN0aW5hdGlvbiIsInRvcCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJwcmV2ZW50RGVmYXVsdCIsIiRzZWxmIiwidGFiSW5kZXgiLCJpbmRleCIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJlcSIsImZhZGVJbiIsIkJhcmJhIiwiUGpheCIsIlByZWZldGNoIiwiYXBwZW5kIiwiJHBhZ2VQcmVsb2FkZXIiLCJGYWRlVHJhbnNpdGlvbiIsIkJhc2VUcmFuc2l0aW9uIiwiZXh0ZW5kIiwic3RhcnQiLCJQcm9taXNlIiwiYWxsIiwibmV3Q29udGFpbmVyTG9hZGluZyIsInNob3dMb2FkZXIiLCJ0aGVuIiwiaGlkZUxvYWRlciIsImJpbmQiLCJvbGRDb250YWluZXIiLCJwcm9taXNlIiwiX3RoaXMiLCIkZWwiLCJuZXdDb250YWluZXIiLCJEaXNwYXRjaGVyIiwiY3VycmVudFN0YXR1cyIsIm9sZFN0YXR1cyIsImNvbnRhaW5lciIsImVhY2giLCJyZW1vdmVBdHRyIiwiZ2V0VHJhbnNpdGlvbiIsImhvdmVyIiwiZmluZCIsImZhZGVPdXQiLCJ3aWR0aCIsInBhcmVudCIsInRvZ2dsZUNsYXNzIiwidmFsIiwiZm9jdXMiLCJmb2N1c291dCIsIm1hZ25pZmljUG9wdXAiLCJyZW1vdmFsRGVsYXkiLCJjYWxsYmFja3MiLCJiZWZvcmVPcGVuIiwic3QiLCJtYWluQ2xhc3MiLCJlbCIsIm1pZENsaWNrIiwicGVyc29uYWxJbmZvU2xpZGVySW5pdCIsImhhc0NsYXNzIiwic2xpY2siLCJzbGlkZXNUb1Nob3ciLCJzbGlkZXNUb1Njcm9sbCIsImFycm93cyIsImZhZGUiLCJjZW50ZXJNb2RlIiwiYXNOYXZGb3IiLCJkb3RzIiwiZm9jdXNPblNlbGVjdCIsInJlc2l6ZSIsInNjcm9sbCIsImhlaWdodCIsIl93aW5kb3ciLCJpIiwidGVsZXBvcnQiLCJjb25kaXRpb24iLCJjb25kaXRpb25Qb3NpdGlvbiIsImNvbmRpdGlvbk1lZGlhIiwidGFyZ2V0Iiwib2JqSHRtbCIsInNlbGYiLCJzdWJzdHJpbmciXSwibWFwcGluZ3MiOiJDQUFBLFdBRUksR0FBSUEsR0FBYUMsRUFBRSxvQkFFbkJDLFlBQVcsV0FDUEYsRUFBV0csU0FBUyxpQkFDckIsS0FFSEYsRUFBRUcsUUFBUUMsR0FBRyxPQUFRLFdBQ2pCSCxXQUFXLFdBQ1BGLEVBQVdHLFNBQVMsbUJBRXBCRCxXQUFXLFdBRVBELEVBQUUsUUFBUUssSUFBSSxXQUFZLFlBQzNCLE1BRUgsR0FBSUMsTUFBTUMsUUFFWCxXQUtYUCxFQUFFUSxVQUFVQyxNQUFNLFdBRWRULEVBQUVVLEtBQUssK0JBQStCQyxLQUFLLFNBQVVDLEdBQVFaLEVBQUUsZUFBZWEsS0FBS0QsRUFBS0UsV0FpQjVGZCxFQUFFUSxVQUFVQyxNQUFNLFdBaVNkLFFBQVNNLEdBQWdCQyxFQUFTQyxHQUM5QmpCLEVBQUVnQixHQUFTRSxNQUFNLFNBQVNDLEdBQ3RCLEdBQUlDLEdBQWVwQixFQUFFcUIsTUFBTUMsS0FBSyxRQUM1QkMsRUFBY3ZCLEVBQUVvQixHQUFjSCxTQUFTTyxHQUN2Q0QsR0FBYyxJQUFLQSxFQUFjLEdBQ3JDdkIsRUFBRSxjQUFjeUIsU0FBVUMsVUFBV0gsRUFBY04sR0FBVSxRQUM3REUsRUFBRVEsbUJBclNWM0IsRUFBRVEsVUFBVUosR0FBRyxRQUFTLHlCQUEwQixTQUFTZSxHQUN2REEsRUFBRVEsZ0JBQ0YsSUFBSUMsR0FBUTVCLEVBQUVxQixNQUNWUSxFQUFXRCxFQUFNRSxPQUNyQkYsR0FBTUcsV0FBV0MsWUFBWSxhQUM3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RUgsSUFBVUMsR0FBV0gsSUFvQnJCRixJQUNBRixFQUFRMUYsR0FBRyxTQUFVLFNBT2pDLFdBQ1FKLEVBQUVRLFVBQVUwRCxRQUFVLEtBQ3RCbEUsRUFBRVEsVUFBVXdELEtBQUssZUFBZW5ELEtBQUssc0JBRXJDYixFQUFFUSxVQUFVd0QsS0FBSyxlQUFlbkQsS0FBSyxVQUV6Q2IsRUFBRUcsUUFBUXdGLE9BQU8sV0FDVDNGLEVBQUVRLFVBQVUwRCxRQUFVLEtBQ3RCbEUsRUFBRVEsVUFBVXdELEtBQUssZUFBZW5ELEtBQUssc0JBRXJDYixFQUFFUSxVQUFVd0QsS0FBSyxlQUFlbkQsS0FBSyxlQWNqREUsRUFBZ0Isb0JBQXFCIiwiZmlsZSI6ImNvbW1vbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcblxuICAgIHZhciAkcHJlbG9hZGVyID0gJCgnLmdsb2JhbC1wcmVsb2FkZXInKTtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICRwcmVsb2FkZXIuYWRkQ2xhc3MoJ2lzLWxvZ28tc2hvdycpO1xuICAgIH0sIDU1MCk7XG5cbiAgICAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRwcmVsb2FkZXIuYWRkQ2xhc3MoJ2lzLWNvbnRlbnQtbG9hZCcpO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8vICRwcmVsb2FkZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAndmlzaWJsZScpO1xuICAgICAgICAgICAgfSwgMTAwMCk7XG5cbiAgICAgICAgICAgIG5ldyBXT1coKS5pbml0KCk7XG5cbiAgICAgICAgfSwgMTUwMCk7XG4gICAgfSk7XG59KSgpO1xuXG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgJC5hamF4KCdodHRwOi8vMTY3Ljk5LjIwMy4xMDc6ODA4MC8nKS5kb25lKGZ1bmN0aW9uIChkYXRhKSB7ICQoJyNzcGFuX3ByaWNlJykuaHRtbChkYXRhLnByaWNlKSB9KTtcblxuICAgIC8vIHZhciBwcmljZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc3Bhbl9wcmljZVwiKTtcbiAgICAvLyAvLyAgIG1ha2UgdGhlIHJlcXVlc3RcbiAgICAvLyB2YXIgWEhSID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAvLyBYSFIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gICAgIGlmIChYSFIucmVhZHlTdGF0ZSA9PSA0ICYmIFhIUi5zdGF0dXMgPT0gMjAwKSB7XG4gICAgLy8gICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoWEhSLnJlc3BvbnNlVGV4dCkucHJpY2U7XG4gICAgLy8gICAgICAgICBwcmljZS5pbm5lckhUTUwgPSBkYXRhO1xuICAgIC8vICAgICB9XG4gICAgLy8gfVxuXG4gICAgLy8gWEhSLm9wZW4oXCJHRVRcIiwgXCJodHRwOi8vMTY3Ljk5LjIwMy4xMDc6ODA4MFwiKTtcbiAgICAvLyBYSFIuc2VuZCgpO1xufSk7XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jb250YWN0c19fY2l0aWVzLWl0ZW0nLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyICRzZWxmID0gJCh0aGlzKSxcbiAgICAgICAgICAgIHRhYkluZGV4ID0gJHNlbGYuaW5kZXgoKTtcbiAgICAgICAgJHNlbGYuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgICRzZWxmLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgJCgnLmNvbnRhY3RzX19pbmZvLWNvbnRhaW5lcicpLmNzcygnZGlzcGxheScsJ25vbmUnKS5lcSh0YWJJbmRleCkuZmFkZUluKDUwMCk7XG4gICAgfSk7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcjd2VhdGhlci1mcmFtZScpLmF0dHIoJ3NyYycsICdodHRwczovL3d3dy52ZW50dXNreS5jb20vJyk7XG4gICAgfSwgMzUwMCk7XG5cbiAgICAvLyBCQVJCQS5KU1xuICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgLy9QbGVhc2Ugbm90ZSwgdGhlIERPTSBzaG91bGQgYmUgcmVhZHlcbiAgICAgICAgQmFyYmEuUGpheC5pbml0KCk7XG4gICAgICAgIEJhcmJhLlByZWZldGNoLmluaXQoKTtcblxuICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwicGFnZS1wcmVsb2FkZXJcIj48ZGl2IGNsYXNzPVwiZ2xvYmFsLXByZWxvYWRlcl9fdW5kZXJcIj48L2Rpdj48L2Rpdj4nKTtcbiAgICAgICAgdmFyICRwYWdlUHJlbG9hZGVyID0gJCgnLnBhZ2UtcHJlbG9hZGVyJyk7XG5cbiAgICAgICAgdmFyIEZhZGVUcmFuc2l0aW9uID0gQmFyYmEuQmFzZVRyYW5zaXRpb24uZXh0ZW5kKHtcbiAgICAgICAgICAgIHN0YXJ0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBQcm9taXNlXG4gICAgICAgICAgICAgICAgICAgIC5hbGwoW3RoaXMubmV3Q29udGFpbmVyTG9hZGluZywgdGhpcy5zaG93TG9hZGVyKCldKVxuICAgICAgICAgICAgICAgICAgICAudGhlbih0aGlzLmhpZGVMb2FkZXIuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBzaG93TG9hZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkcGFnZVByZWxvYWRlci5hZGRDbGFzcygnaXMtcGFnZS1sb2FkLXN0YXJ0Jyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzLm9sZENvbnRhaW5lcikucHJvbWlzZSgpO1xuXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBoaWRlTG9hZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHZhciAkZWwgPSAkKHRoaXMubmV3Q29udGFpbmVyKTtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICRwYWdlUHJlbG9hZGVyLmFkZENsYXNzKCdpcy1wYWdlLWxvYWQtZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgIC8vINCm0JUg0KLQntCR0IYg0J3QlSDQndCQ0JTQkFxuICAgICAgICAgICAgICAgICAgICAkZWwuYW5pbWF0ZSh7fSwgNDAwLCBmdW5jdGlvbigpIHsgX3RoaXMuZG9uZSgpOyB9KTtcblxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHBhZ2VQcmVsb2FkZXIucmVtb3ZlQ2xhc3MoJ2lzLXBhZ2UtbG9hZC1zdGFydCBpcy1wYWdlLWxvYWQtZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDQktGA0LXQvNGPINGA0LXRhNGA0LXRiNCwINC/0YDQtdC70L7QsNC00LXRgNCwXG4gICAgICAgICAgICAgICAgICAgIH0sIDgwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g0JLRgNC10LzRjyDQuNGB0YfQtdC30L3QvtCy0LXQvdC40Y8g0L/RgNC10LvQvtCw0LTQtdGA0LBcbiAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCAndmlzaWJsZScpO1xuICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBCYXJiYS5EaXNwYXRjaGVyLm9uKCduZXdQYWdlUmVhZHknLCBmdW5jdGlvbihjdXJyZW50U3RhdHVzLCBvbGRTdGF0dXMsIGNvbnRhaW5lcikge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkLmVhY2goJCgnLmFuaW1hdGVkJyksIGZ1bmN0aW9uKCkgeyAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCcpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7IH0pO1xuICAgICAgICAgICAgICAgIG5ldyBXT1coKS5pbml0KCk7XG5cbiAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQoJyN3ZWF0aGVyLWZyYW1lJykuYXR0cignc3JjJywgJ2h0dHBzOi8vd3d3LnZlbnR1c2t5LmNvbS8nKTtcbiAgICAgICAgICAgIH0sIDE1MDApO1xuICAgICAgICB9KTtcblxuICAgICAgICBCYXJiYS5QamF4LmdldFRyYW5zaXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBGYWRlVHJhbnNpdGlvbjtcbiAgICAgICAgfTtcbiAgICB9KSgpO1xuXG4gICAgJCgnLmYtcmlnaHRfX3Nob3cnKS5ob3ZlcihmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5mLXJpZ2h0X19kcm9wZG93bicpLmZhZGVJbigpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJy5mLXJpZ2h0X19kcm9wZG93bicpLmZhZGVPdXQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkKGRvY3VtZW50KS53aWR0aCgpID4gOTkzKSB7XG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbignbW91c2VvdmVyJywgJy5oZWFkZXJfX2xhbmd1YWdlcycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuaGVhZGVyX19tb3JlLWxhbmd1YWdlcycpLmZhZGVJbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbignbW91c2VsZWF2ZScsICcuaGVhZGVyX19sYW5ndWFnZXMnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmhlYWRlcl9fbW9yZS1sYW5ndWFnZXMnKS5mYWRlT3V0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHt9XG4gICAgfSkoKTtcblxuICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZW92ZXInLCAnLmhvdmVyLWxpbmsnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5hZGRDbGFzcygnaXMtaG92ZXInKTtcbiAgICB9KTtcbiAgICAkKGRvY3VtZW50KS5vbignbW91c2VsZWF2ZScsICcuaG92ZXItbGluaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdpcy1ob3ZlcicpO1xuICAgIH0pO1xuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjbmF2LWljb24yJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdvcGVuJyk7XG4gICAgICAgICAgICAkKCcuaGVhZGVyX19sZWZ0LW1vYmlsZScpLnRvZ2dsZUNsYXNzKCdpcy1vcGVuJyk7XG4gICAgICAgICAgICAkKCdib2R5JykuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjbmF2LWljb24yLm9wZW4nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgJ2F1dG8nKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5tZW51LWxpbmsnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJ3VsIGxpIGEnKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcuZW50ZXItbGluaycpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgICAgICQoJy5oZWFkZXJfX2xlZnQtbW9iaWxlJykucmVtb3ZlQ2xhc3MoJ2lzLW9wZW4nKTtcbiAgICAgICAgICAgICQoJyNuYXYtaWNvbjInKS5yZW1vdmVDbGFzcygnb3BlbicpO1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuZW50ZXItbGluaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnLmhlYWRlciBhJykucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAgICAgJCgnLmhlYWRlcl9fbGVmdC1tb2JpbGUnKS5yZW1vdmVDbGFzcygnaXMtb3BlbicpO1xuICAgICAgICAgICAgJCgnI25hdi1pY29uMicpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBXT1dcblxuICAgIC8vIG5ldyBXT1coKS5pbml0KCk7XG5cblxuICAgICQoXCIuaW5wdXQtbG9naW5cIikuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCQodGhpcykudmFsKCkgIT0gXCJcIikge1xuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcyhcImFuaW1hdGlvblwiKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgJChcIi5sb2dpbi1pbnB1dFwiKS5mb2N1cyhmdW5jdGlvbigpIHtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcyhcImFuaW1hdGlvbiBhbmltYXRpb24tY29sb3JcIik7XG4gICAgfSk7XG5cbiAgICAkKFwiLmxvZ2luLWlucHV0XCIpLmZvY3Vzb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoJCh0aGlzKS52YWwoKSA9PT0gXCJcIilcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJhbmltYXRpb25cIik7XG4gICAgICAgICQodGhpcykucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJhbmltYXRpb24tY29sb3JcIik7XG4gICAgfSk7XG5cbiAgICAvLyBJbmxpbmUgcG9wdXBzXG4gICAgJCgnLm9wZW4tcG9wdXAnKS5tYWduaWZpY1BvcHVwKHtcbiAgICAgICAgcmVtb3ZhbERlbGF5OiA1MDAsIC8vZGVsYXkgcmVtb3ZhbCBieSBYIHRvIGFsbG93IG91dC1hbmltYXRpb25cbiAgICAgICAgY2FsbGJhY2tzOiB7XG4gICAgICAgICAgICBiZWZvcmVPcGVuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0Lm1haW5DbGFzcyA9IHRoaXMuc3QuZWwuYXR0cignZGF0YS1lZmZlY3QnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbWlkQ2xpY2s6IHRydWVcbiAgICB9KTtcblxuICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ21vdXNlb3ZlcicsICcucGVyc29uYWxfX2xpbmsnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnaXMtYWN0aXZlJykpIHt9IFxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHZhciAkc2VsZiA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgIHRhYkluZGV4ID0gJHNlbGYuaW5kZXgoKTtcbiAgICAgICAgICAgICAgICAkc2VsZi5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAkc2VsZi5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgJCgnLnBlcnNvbmFsX19pbWFnZScpLmZhZGVPdXQoKS5lcSh0YWJJbmRleCkuZmFkZUluKDQwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIHBlcnNvbmFsSW5mb1NsaWRlckluaXQoKSB7XG5cbiAgICAgICAgICAgIGlmICgkKGRvY3VtZW50KS53aWR0aCgpID4gOTkyKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQoJy5wZXJzb25hbF9faW5mbycpLmhhc0NsYXNzKCdzbGljay1pbml0aWFsaXplZCcpKVxuICAgICAgICAgICAgICAgICAgICAkKCcucGVyc29uYWxfX2luZm8nKS5zbGljaygndW5zbGljaycpO1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgaWYgKCQoJy5wZXJzb25hbF9faW1hZ2UtY2Fyb3VzZWwnKS5oYXNDbGFzcygnc2xpY2staW5pdGlhbGl6ZWQnKSlcbiAgICAgICAgICAgICAgICAgICAgJCgnLnBlcnNvbmFsX19pbWFnZS1jYXJvdXNlbCcpLnNsaWNrKCd1bnNsaWNrJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghJCgnLnBlcnNvbmFsX19pbmZvJykuaGFzQ2xhc3MoJ3NsaWNrLWluaXRpYWxpemVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnBlcnNvbmFsX19pbmZvJykuc2xpY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJvd3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmFkZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlck1vZGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhc05hdkZvcjogJy5wZXJzb25hbF9faW1hZ2UtY2Fyb3VzZWwnLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoISQoJy5wZXJzb25hbF9faW1hZ2UtY2Fyb3VzZWwnKS5oYXNDbGFzcygnc2xpY2staW5pdGlhbGl6ZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAkKCcucGVyc29uYWxfX2ltYWdlLWNhcm91c2VsJykuc2xpY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBhc05hdkZvcjogJy5wZXJzb25hbF9faW5mbycsXG4gICAgICAgICAgICAgICAgICAgICAgICBkb3RzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNPblNlbGVjdDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgcGVyc29uYWxJbmZvU2xpZGVySW5pdCgpO1xuXG4gICAgICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBwZXJzb25hbEluZm9TbGlkZXJJbml0KCk7XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnYVtocmVmPVwiI1wiXScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNjcm9sbEJvdHRvbSA9ICQod2luZG93KS5zY3JvbGxUb3AoKSArICQod2luZG93KS5oZWlnaHQoKTtcbiAgICAgICAgaWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSA+IDI1MCkge1xuICAgICAgICAgICAgJCgnLmJvdHRvbS1hcnJvdycpLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJy5ib3R0b20tYXJyb3cnKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vLy8vLy8vLy8vL1xuICAgIC8vIFRFTEVQT1JUIFBMVUdJTlxuICAgIC8vLy8vLy8vLy8vL1xuXG4gICAgdmFyIF93aW5kb3cgPSAkKHdpbmRvdyk7XG5cbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJ1tqcy10ZWxlcG9ydF0nKS5lYWNoKGZ1bmN0aW9uKGksIHZhbCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSAkKHZhbClcbiAgICAgICAgICAgIHZhciBvYmpIdG1sID0gJCh2YWwpLmh0bWwoKTtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKCdbZGF0YS10ZWxlcG9ydC10YXJnZXQ9JyArICQodmFsKS5kYXRhKCd0ZWxlcG9ydC10bycpICsgJ10nKTtcbiAgICAgICAgICAgIHZhciBjb25kaXRpb25NZWRpYSA9ICQodmFsKS5kYXRhKCd0ZWxlcG9ydC1jb25kaXRpb24nKS5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICB2YXIgY29uZGl0aW9uUG9zaXRpb24gPSAkKHZhbCkuZGF0YSgndGVsZXBvcnQtY29uZGl0aW9uJykuc3Vic3RyaW5nKDAsIDEpO1xuXG4gICAgICAgICAgICBpZiAodGFyZ2V0ICYmIG9iakh0bWwgJiYgY29uZGl0aW9uUG9zaXRpb24pIHtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRlbGVwb3J0KCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25kaXRpb25Qb3NpdGlvbiA9PT0gXCI8XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbiA9IF93aW5kb3cud2lkdGgoKSA8IGNvbmRpdGlvbk1lZGlhO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbmRpdGlvblBvc2l0aW9uID09PSBcIj5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uID0gX3dpbmRvdy53aWR0aCgpID4gY29uZGl0aW9uTWVkaWE7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZGl0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuaHRtbChvYmpIdG1sKVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5odG1sKCcnKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5odG1sKG9iakh0bWwpXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuaHRtbChcIlwiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGVsZXBvcnQoKTtcbiAgICAgICAgICAgICAgICBfd2luZG93Lm9uKCdyZXNpemUnLCAodGVsZXBvcnQpKTtcblxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pKCk7XG5cbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkKGRvY3VtZW50KS53aWR0aCgpID4gMTI2OCkge1xuICAgICAgICAgICAgJChkb2N1bWVudCkuZmluZCgnLmVudGVyLWxpbmsnKS5odG1sKCfQo9Cy0ZbQudGC0Lgg0LTQviDQutCw0LHRltC90LXRgtGDJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKGRvY3VtZW50KS5maW5kKCcuZW50ZXItbGluaycpLmh0bWwoJ9Cj0LLRltC50YLQuCcpO1xuICAgICAgICB9XG4gICAgICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJChkb2N1bWVudCkud2lkdGgoKSA+IDEyNjgpIHtcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5maW5kKCcuZW50ZXItbGluaycpLmh0bWwoJ9Cj0LLRltC50YLQuCDQtNC+INC60LDQsdGW0L3QtdGC0YMnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkuZmluZCgnLmVudGVyLWxpbmsnKS5odG1sKCfQo9Cy0ZbQudGC0LgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSkoKTtcblxuICAgIGZ1bmN0aW9uIHNjcm9sbFRvRWxlbWVudChlbGVtZW50LCBvZmZzZXQpIHtcbiAgICAgICAgJChlbGVtZW50KS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudENsaWNrID0gJCh0aGlzKS5hdHRyKFwiaHJlZlwiKTtcbiAgICAgICAgICAgIHZhciBkZXN0aW5hdGlvbiA9ICQoZWxlbWVudENsaWNrKS5vZmZzZXQoKS50b3A7XG4gICAgICAgICAgICBpZiAoZGVzdGluYXRpb24gPCAwKSB7IGRlc3RpbmF0aW9uID0gMDsgfVxuICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoeyBzY3JvbGxUb3A6IGRlc3RpbmF0aW9uIC0gb2Zmc2V0IH0sIFwic2xvd1wiKTtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNjcm9sbFRvRWxlbWVudChcImFbaHJlZj0nI2FuY2hvciddXCIsIDY3KTtcblxufSk7Il19
